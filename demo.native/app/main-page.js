"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var main_view_model_1 = require("./main-view-model");
var page;
var markers;
var tilt;
var map = null;
var points = [
    {
        latitude: 59.435803,
        longitude: 24.757259,
        activationRadius: 10
    }, {
        latitude: 59.433808,
        longitude: 24.766438,
        activationRadius: 15
    }, {
        latitude: 59.438599,
        longitude: 24.791812,
        activationRadius: 25
    }
];
function pageLoaded(args) {
    page = args.object;
    markers = [1];
    tilt = 45;
    page.bindingContext = new main_view_model_1.HelloWorldModel();
    page.getViewById('map').on('mapReady', onMapReady.bind(this));
    page.getViewById('map').on('mapClick', onMapClick.bind(this));
    page.getViewById('map').on('mapLongClick', onMapLongClick.bind(this));
}
exports.pageLoaded = pageLoaded;
function onLoaded(args) {
    args.object.on('mapReady', function (args) {
        console.dir('mapReady');
        onMapReady(args);
        map = args.object;
        map
            .calculateRoute(points)
            .then(function () {
            console.log('Hello from view!');
            map
                .addMarkers(points.map(function (point, index) { return ({
                id: index,
                latitude: point.latitude,
                longitude: point.longitude,
                title: "Point " + index,
                draggable: false
            }); }))
                .then(function () {
                console.log('Markers added!');
            });
        });
    });
}
exports.onLoaded = onLoaded;
function removeMarkers() {
    map.removeMarkers(markers);
}
exports.removeMarkers = removeMarkers;
function navigation() {
    map.startNavigation();
}
exports.navigation = navigation;
function calculate() {
    map.calculateRoute(points);
}
exports.calculate = calculate;
function simulation() {
    map.startSimulation();
}
exports.simulation = simulation;
function stop() {
    map.stopNavigation();
}
exports.stop = stop;
function showWay() {
    map.showWay();
}
exports.showWay = showWay;
function onMapClick(event) {
    var count = map._getMarkersCount();
    var next = count + 1;
}
function onMapLongClick(event) {
    var count = map._getMarkersCount();
    var next = count + 1;
}
function updateMarker(event) {
    page.getViewById('map').updateMarker({
        id: 1,
        latitude: 10.6689243,
        longitude: -61.5315486,
    });
}
exports.updateMarker = updateMarker;
function onMapReady(event) {
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi1wYWdlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibWFpbi1wYWdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRUEscURBQW9EO0FBR3BELElBQUksSUFBSSxDQUFDO0FBQ1QsSUFBSSxPQUFPLENBQUM7QUFDWixJQUFJLElBQUksQ0FBQztBQUNULElBQUksR0FBRyxHQUFHLElBQUksQ0FBQztBQUNmLElBQUksTUFBTSxHQUFHO0lBQ1Q7UUFDSSxRQUFRLEVBQUUsU0FBUztRQUNuQixTQUFTLEVBQUUsU0FBUztRQUNwQixnQkFBZ0IsRUFBRSxFQUFFO0tBQ3ZCLEVBQUU7UUFDQyxRQUFRLEVBQUUsU0FBUztRQUNuQixTQUFTLEVBQUUsU0FBUztRQUNwQixnQkFBZ0IsRUFBRSxFQUFFO0tBQ3ZCLEVBQUU7UUFDQyxRQUFRLEVBQUUsU0FBUztRQUNuQixTQUFTLEVBQUUsU0FBUztRQUNwQixnQkFBZ0IsRUFBRSxFQUFFO0tBQ3ZCO0NBQ0osQ0FBQTtBQUdELG9CQUEyQixJQUEwQjtJQUVqRCxJQUFJLEdBQWUsSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUMvQixPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNkLElBQUksR0FBRyxFQUFFLENBQUM7SUFDVixJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksaUNBQWUsRUFBRSxDQUFDO0lBQzVDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDOUQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUM5RCxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxjQUFjLEVBQUUsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQzFFLENBQUM7QUFURCxnQ0FTQztBQUVELGtCQUF5QixJQUFJO0lBQ3pCLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxVQUFBLElBQUk7UUFDM0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQTtRQUN2QixVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFakIsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFLbEIsR0FBRzthQUNFLGNBQWMsQ0FBQyxNQUFNLENBQUM7YUFDdEIsSUFBSSxDQUFDO1lBQ0YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFBO1lBRS9CLEdBQUc7aUJBQ0UsVUFBVSxDQUFlLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBQyxLQUFLLEVBQUUsS0FBSyxJQUFLLE9BQUEsQ0FBQztnQkFDcEQsRUFBRSxFQUFFLEtBQUs7Z0JBQ1QsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO2dCQUN4QixTQUFTLEVBQUUsS0FBSyxDQUFDLFNBQVM7Z0JBQzFCLEtBQUssRUFBRSxXQUFTLEtBQU87Z0JBQ3ZCLFNBQVMsRUFBRSxLQUFLO2FBQ25CLENBQUMsRUFOcUQsQ0FNckQsQ0FBQyxDQUFDO2lCQUNILElBQUksQ0FBQztnQkFDRixPQUFPLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLENBQUE7WUFDakMsQ0FBQyxDQUFDLENBQUE7UUFDVixDQUFDLENBQUMsQ0FBQTtJQWNWLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQXpDRCw0QkF5Q0M7QUFFRDtJQUNJLEdBQUcsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDL0IsQ0FBQztBQUZELHNDQUVDO0FBRUQ7SUFDSSxHQUFHLENBQUMsZUFBZSxFQUFFLENBQUE7QUFDekIsQ0FBQztBQUZELGdDQUVDO0FBRUQ7SUFDSSxHQUFHLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFBO0FBQzlCLENBQUM7QUFGRCw4QkFFQztBQUVEO0lBQ0ksR0FBRyxDQUFDLGVBQWUsRUFBRSxDQUFBO0FBQ3pCLENBQUM7QUFGRCxnQ0FFQztBQUVEO0lBQ0ksR0FBRyxDQUFDLGNBQWMsRUFBRSxDQUFBO0FBQ3hCLENBQUM7QUFGRCxvQkFFQztBQUVEO0lBQ0ksR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFBO0FBQ2pCLENBQUM7QUFGRCwwQkFFQztBQUVELG9CQUFvQixLQUFLO0lBQ3JCLElBQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQ3JDLElBQU0sSUFBSSxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUM7QUFTM0IsQ0FBQztBQUVELHdCQUF3QixLQUFLO0lBQ3pCLElBQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQ3JDLElBQU0sSUFBSSxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUM7QUFnQjNCLENBQUM7QUFFRCxzQkFBNkIsS0FBSztJQUM5QixJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLFlBQVksQ0FBQztRQUNqQyxFQUFFLEVBQUUsQ0FBQztRQUNMLFFBQVEsRUFBRSxVQUFVO1FBQ3BCLFNBQVMsRUFBRSxDQUFDLFVBQVU7S0FDekIsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQU5ELG9DQU1DO0FBRUQsb0JBQW9CLEtBQUs7QUFFekIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIG9ic2VydmFibGUgZnJvbSAndG5zLWNvcmUtbW9kdWxlcy9kYXRhL29ic2VydmFibGUnO1xuaW1wb3J0ICogYXMgcGFnZXMgZnJvbSAndG5zLWNvcmUtbW9kdWxlcy91aS9wYWdlJztcbmltcG9ydCB7IEhlbGxvV29ybGRNb2RlbCB9IGZyb20gJy4vbWFpbi12aWV3LW1vZGVsJztcbmltcG9ydCB7IEhlcmUsIEhlcmVNYXJrZXIgfSBmcm9tICduYXRpdmVzY3JpcHQtaGVyZSc7XG5cbmxldCBwYWdlO1xubGV0IG1hcmtlcnM7XG5sZXQgdGlsdDtcbmxldCBtYXAgPSBudWxsO1xubGV0IHBvaW50cyA9IFtcbiAgICB7XG4gICAgICAgIGxhdGl0dWRlOiA1OS40MzU4MDMsXG4gICAgICAgIGxvbmdpdHVkZTogMjQuNzU3MjU5LFxuICAgICAgICBhY3RpdmF0aW9uUmFkaXVzOiAxMFxuICAgIH0sIHtcbiAgICAgICAgbGF0aXR1ZGU6IDU5LjQzMzgwOCxcbiAgICAgICAgbG9uZ2l0dWRlOiAyNC43NjY0MzgsXG4gICAgICAgIGFjdGl2YXRpb25SYWRpdXM6IDE1XG4gICAgfSwge1xuICAgICAgICBsYXRpdHVkZTogNTkuNDM4NTk5LFxuICAgICAgICBsb25naXR1ZGU6IDI0Ljc5MTgxMixcbiAgICAgICAgYWN0aXZhdGlvblJhZGl1czogMjVcbiAgICB9XG5dXG5cbi8vIEV2ZW50IGhhbmRsZXIgZm9yIFBhZ2UgJ2xvYWRlZCcgZXZlbnQgYXR0YWNoZWQgaW4gbWFpbi1wYWdlLnhtbFxuZXhwb3J0IGZ1bmN0aW9uIHBhZ2VMb2FkZWQoYXJnczogb2JzZXJ2YWJsZS5FdmVudERhdGEpIHtcbiAgICAvLyBHZXQgdGhlIGV2ZW50IHNlbmRlclxuICAgIHBhZ2UgPSA8cGFnZXMuUGFnZT5hcmdzLm9iamVjdDtcbiAgICBtYXJrZXJzID0gWzFdO1xuICAgIHRpbHQgPSA0NTtcbiAgICBwYWdlLmJpbmRpbmdDb250ZXh0ID0gbmV3IEhlbGxvV29ybGRNb2RlbCgpO1xuICAgIHBhZ2UuZ2V0Vmlld0J5SWQoJ21hcCcpLm9uKCdtYXBSZWFkeScsIG9uTWFwUmVhZHkuYmluZCh0aGlzKSk7XG4gICAgcGFnZS5nZXRWaWV3QnlJZCgnbWFwJykub24oJ21hcENsaWNrJywgb25NYXBDbGljay5iaW5kKHRoaXMpKTtcbiAgICBwYWdlLmdldFZpZXdCeUlkKCdtYXAnKS5vbignbWFwTG9uZ0NsaWNrJywgb25NYXBMb25nQ2xpY2suYmluZCh0aGlzKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvbkxvYWRlZChhcmdzKSB7XG4gICAgYXJncy5vYmplY3Qub24oJ21hcFJlYWR5JywgYXJncyA9PiB7XG4gICAgICAgIGNvbnNvbGUuZGlyKCdtYXBSZWFkeScpXG4gICAgICAgIG9uTWFwUmVhZHkoYXJncyk7XG5cbiAgICAgICAgbWFwID0gYXJncy5vYmplY3Q7XG5cbiAgICAgICAgLy8gbWFwLnRvZ2dsZVNjcm9sbChmYWxzZSlcbiAgICAgICAgLy8gbWFwLnRvZ2dsZVpvb20oZmFsc2UpXG5cbiAgICAgICAgbWFwXG4gICAgICAgICAgICAuY2FsY3VsYXRlUm91dGUocG9pbnRzKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdIZWxsbyBmcm9tIHZpZXchJylcblxuICAgICAgICAgICAgICAgIG1hcFxuICAgICAgICAgICAgICAgICAgICAuYWRkTWFya2Vycyg8SGVyZU1hcmtlcltdPnBvaW50cy5tYXAoKHBvaW50LCBpbmRleCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiBwb2ludC5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogcG9pbnQubG9uZ2l0dWRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGBQb2ludCAke2luZGV4fWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0pKSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ01hcmtlcnMgYWRkZWQhJylcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAvLyBtYXAuYWRkTWFya2Vycyg8SGVyZU1hcmtlcltdPnBvaW50cy5tYXAoKHBvaW50LCBpbmRleCkgPT4gKHtcbiAgICAgICAgICAgICAgICAvLyAgICAgaWQ6IGluZGV4LFxuICAgICAgICAgICAgICAgIC8vICAgICBsYXRpdHVkZTogcG9pbnQubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgLy8gICAgIGxvbmdpdHVkZTogcG9pbnQubG9uZ2l0dWRlLFxuICAgICAgICAgICAgICAgIC8vICAgICB0aXRsZTogYFBvaW50ICR7aW5kZXh9YCxcbiAgICAgICAgICAgICAgICAvLyAgICAgb25UYXA6IChtYXJrZXIpID0+IHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNvbnN0IHVwZGF0ZWRNYXJrZXIgPSBPYmplY3QuYXNzaWduKHt9LCBtYXJrZXIsIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBzZWxlY3RlZDogIW1hcmtlci5zZWxlY3RlZFxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBtYXAudXBkYXRlTWFya2VyKHVwZGF0ZWRNYXJrZXIpO1xuICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgLy8gfSkpKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU1hcmtlcnMoKSB7XG4gICAgbWFwLnJlbW92ZU1hcmtlcnMobWFya2Vycyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuYXZpZ2F0aW9uKCkge1xuICAgIG1hcC5zdGFydE5hdmlnYXRpb24oKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlKCkge1xuICAgIG1hcC5jYWxjdWxhdGVSb3V0ZShwb2ludHMpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaW11bGF0aW9uKCkge1xuICAgIG1hcC5zdGFydFNpbXVsYXRpb24oKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBtYXAuc3RvcE5hdmlnYXRpb24oKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hvd1dheSgpIHtcbiAgICBtYXAuc2hvd1dheSgpXG59XG5cbmZ1bmN0aW9uIG9uTWFwQ2xpY2soZXZlbnQpIHtcbiAgICBjb25zdCBjb3VudCA9IG1hcC5fZ2V0TWFya2Vyc0NvdW50KCk7XG4gICAgY29uc3QgbmV4dCA9IGNvdW50ICsgMTtcblxuICAgIC8vIG1hcC5hZGRNYXJrZXJzKDxIZXJlTWFya2VyW10+W3tcbiAgICAvLyAgICAgaWQ6IG5leHQsXG4gICAgLy8gICAgIGxhdGl0dWRlOiBldmVudC5sYXRpdHVkZSxcbiAgICAvLyAgICAgbG9uZ2l0dWRlOiBldmVudC5sb25naXR1ZGUsXG4gICAgLy8gICAgIHRpdGxlOiBgQ2xpY2sgJHtuZXh0fWBcbiAgICAvLyB9XSk7XG4gICAgLy8gbWFya2Vycy5wdXNoKG5leHQpO1xufVxuXG5mdW5jdGlvbiBvbk1hcExvbmdDbGljayhldmVudCkge1xuICAgIGNvbnN0IGNvdW50ID0gbWFwLl9nZXRNYXJrZXJzQ291bnQoKTtcbiAgICBjb25zdCBuZXh0ID0gY291bnQgKyAxO1xuXG4gICAgLy8gbWFwLmFkZE1hcmtlcnMoPEhlcmVNYXJrZXJbXT5be1xuICAgIC8vICAgICBpZDogbmV4dCxcbiAgICAvLyAgICAgbGF0aXR1ZGU6IGV2ZW50LmxhdGl0dWRlLFxuICAgIC8vICAgICBsb25naXR1ZGU6IGV2ZW50LmxvbmdpdHVkZSxcbiAgICAvLyAgICAgdGl0bGU6IGBMb25nIENsaWNrICR7bmV4dH1gLFxuICAgIC8vICAgICBvblRhcDogKG1hcmtlcikgPT4ge1xuICAgIC8vICAgICAgICAgY29uc3QgdXBkYXRlZE1hcmtlciA9IE9iamVjdC5hc3NpZ24oe30sIG1hcmtlciwge1xuICAgIC8vICAgICAgICAgICAgIHNlbGVjdGVkOiAhbWFya2VyLnNlbGVjdGVkXG4gICAgLy8gICAgICAgICB9KTtcbiAgICAvLyAgICAgICAgIG1hcC51cGRhdGVNYXJrZXIodXBkYXRlZE1hcmtlcik7XG4gICAgLy8gICAgIH1cbiAgICAvLyB9XSk7XG5cbiAgICAvLyBtYXJrZXJzLnB1c2gobmV4dCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVNYXJrZXIoZXZlbnQpIHtcbiAgICBwYWdlLmdldFZpZXdCeUlkKCdtYXAnKS51cGRhdGVNYXJrZXIoe1xuICAgICAgICBpZDogMSxcbiAgICAgICAgbGF0aXR1ZGU6IDEwLjY2ODkyNDMsXG4gICAgICAgIGxvbmdpdHVkZTogLTYxLjUzMTU0ODYsXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIG9uTWFwUmVhZHkoZXZlbnQpIHtcbiAgIFxufSJdfQ==